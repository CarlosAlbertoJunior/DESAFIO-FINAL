<!-- src/app/cadastro/cadastro.html -->
<div class="container my-5">
  <div class="card p-4 shadow-sm">
    <h2 class="text-center mb-4">CADASTRO DE UTILIZADOR</h2>
    <hr class="mb-4" />

    <div *ngIf="cadastroSucesso" class="alert alert-success" role="alert">
      <strong>Cadastro realizado com sucesso!</strong> Bem-vindo(a)!
    </div>

    <div *ngIf="cadastroError" class="alert alert-danger" role="alert">
      {{ cadastroError }}
    </div>

    <form (ngSubmit)="onSubmit(cadastroForm)" #cadastroForm="ngForm" novalidate>
      <div class="row mb-3">
        <div class="col-md-6 col-12">
          <label for="nome" class="form-label"
            >NOME <span class="text-danger">*</span></label
          >
          <input
            type="text"
            class="form-control"
            id="nome"
            name="nome"
            placeholder="Informe o seu Nome"
            [(ngModel)]="formData.nome"
            required
            #nomeField="ngModel"
          />
        </div>
        <div class="col-md-6 col-12">
          <label for="sobrenome" class="form-label"
            >SOBRENOME <span class="text-danger">*</span></label
          >
          <input
            type="text"
            class="form-control"
            id="sobrenome"
            name="sobrenome"
            placeholder="Informe o seu Sobrenome"
            [(ngModel)]="formData.sobrenome"
            required
            #sobrenomeField="ngModel"
          />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6 col-12">
          <label for="email" class="form-label"
            >E-MAIL <span class="text-danger">*</span></label
          >
          <input
            type="email"
            class="form-control"
            id="email"
            name="email"
            placeholder="Informe o seu E-mail"
            [(ngModel)]="formData.email"
            required
            email
            #emailField="ngModel"
          />
        </div>
        <div class="col-md-6 col-12">
          <label for="celularWhatsapp" class="form-label"
            >CELULAR/WHATSAPP</label
          >
          <input
            type="text"
            class="form-control"
            id="celularWhatsapp"
            name="celularWhatsapp"
            placeholder="(__) _____-____"
            [(ngModel)]="formData.celularWhatsapp"
          />
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6 col-12">
          <label for="senha" class="form-label"
            >SENHA <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              id="senha"
              name="senha"
              placeholder="Informe a sua Senha"
              [(ngModel)]="formData.senha"
              required
              minlength="8"
              #senhaField="ngModel"
            />
            <button
              class="btn btn-outline-secondary"
              type="button"
              (click)="showPassword = !showPassword"
            >
              <i
                class="bi"
                [ngClass]="showPassword ? 'bi-eye-slash-fill' : 'bi-eye-fill'"
              ></i>
            </button>
          </div>
          <small class="form-text text-muted"
            >A sua senha deve ter no mínimo 8 dígitos.</small
          >
        </div>
        <div class="col-md-6 col-12">
          <label for="repetirSenha" class="form-label"
            >REPETIR SENHA <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              [type]="showRepeatPassword ? 'text' : 'password'"
              class="form-control"
              id="repetirSenha"
              name="repetirSenha"
              placeholder="Repita a sua Senha"
              [(ngModel)]="formData.repetirSenha"
              required
              #repetirSenhaField="ngModel"
            />
            <button
              class="btn btn-outline-secondary"
              type="button"
              (click)="showRepeatPassword = !showRepeatPassword"
            >
              <i
                class="bi"
                [ngClass]="
                  showRepeatPassword ? 'bi-eye-slash-fill' : 'bi-eye-fill'
                "
              ></i>
            </button>
          </div>
        </div>
      </div>

      <div class="col-12 mb-3">
        <label for="anoConheceu" class="form-label"
          >Em que ano você conheceu a Cosnection?
          <span class="text-danger">*</span></label
        >
        <select
          id="anoConheceu"
          name="anoConheceu"
          class="form-select"
          [(ngModel)]="formData.anoConheceu"
          required
        >
          <option [ngValue]="null" disabled>Selecione um ano...</option>
          <option *ngFor="let ano of anosDisponiveis" [value]="ano">
            {{ ano }}
          </option>
        </select>
      </div>

      <div class="form-check mb-4">
        <input
          class="form-check-input"
          type="checkbox"
          id="lgpdAceita"
          name="lgpdAceita"
          [(ngModel)]="formData.lgpdAceita"
          required
          #lgpdField="ngModel"
        />
        <label class="form-check-label" for="lgpdAceita">
          Eu li e concordo com a
          <a href="#" class="text-primary"
            >Política de Privacidade e Termos de Uso</a
          >. <span class="text-danger">*</span>
        </label>
      </div>

      <div class="d-grid gap-2">
        <button
          type="submit"
          class="btn btn-success btn-lg"
          [disabled]="cadastroForm.invalid || processandoCadastro"
        >
          <span
            *ngIf="processandoCadastro"
            class="spinner-border spinner-border-sm me-2"
            role="status"
            aria-hidden="true"
          ></span>
          SALVAR
        </button>
      </div>
    </form>
  </div>
</div>
